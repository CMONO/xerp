一. 几个概念：
1.我们把一件“事”称为案例（case），有时又叫做工作（work)，职业(job)，产品(Product)，服务(service),项目(item）。案例总处于某个特定状态，该状态由三个元素组成：
（1）案例相关的属性
（2）已经满足的条件
（3）案例的内容
2.本质上case都是离散的，它们有自己独立的开始和结束，都能彼此区分，每一个case都在一个过程中被执行。（其实这里的case就是我们一般工作流中的所谓工作流实例）

3.过程：由许多要被执行的task(任务)和一系列决定任务执行次序的条件构成。过程定义了案例的生命周期

4.任务(task)：是一个工作的逻辑单元，它能够作为一个整体被资源(resource)执行。任务可以被定义为不能再细分的过程，即原子过程，这里存在主观因素。在定义或者分派任务的人看来，任务是原子性的，但是对于执行它的人来说经常是非原子性。
5.资源(resource)：是指能够执行特定任务的一个人、一台机器或一群人。
6.过程结构的四种基本机制，或者说案例的生命周期（称为路由）：顺序(sequence),选择(selection），并行，循环。
7.活动（Activity)：任务的具体执行（由资源所执行）称为活动。
8.过程的分类：
基本过程：企业中那些生产产品或者服务的过程，也称作生产过程。
二级过程：支持基本过程的过程，因此也被称为支持过程，比如财务管理、人力管理等。
三级过程：指导与协调基本和二级过程的管理过程。

9.工作流的启动（触发）有3类：
（1）资源驱动（人工，自动，半自动）
（2）外部事件，一个JMS消息？
（3）时间信号（定时事件）

二.组织结构
1.组织结构确立了如何把组织所需要完成的工作分配给员工，最重要的三种组织形式：
（1）层次结构，常见的、通过树结构来描述的组织图
（2）矩阵结构，在以项目为中心的公司中较为常见，比如软件公司，一个员工同时属于电信事业部和XXX现场项目组
（3）网状结构
2.有关工作流权限系统的设计，更多请见银狐999的文档《工作流系统组织模型应用和解决方案》

三.过程管理
1.区分管理系统与被管理系统，管理系统将目标、前提和决策传达给被管理系统，被管理系统可以向管理系统回报，根据汇报，管理系统可以修正这些目标。
2.过程管理分为四个层次：
（1）Real-time，实时管理
（2）Operational 操作管理
（3）战术管理
（4）战略管理
从上往下影响的范围越广，持续时间越长。
3.业务过程信息系统的发展，历史表明，越来越多的通用任务已被从程序中分离出来并且放入分解的管理系统中：
（1）1965-1975年：分解应用。信息系统由分解的应用组成，每个应用都有自己的数据库和定义。
（2）1975-1985年：数据库管理——将数据管理从应用程序中抽离出来，不同的程序共享一个数据库，面向数据的开发方法产生
（3）1985-1995年：用户界面管理——将用户界面从应用程序中抽取出来。
（4）1995-2005：工作流管理——将业务过程从应用程序中抽取出来。工作流系统负责管理工作流并组织案例数据在不同的人员以及应用程序间进行流转。


一、工作流概念
1.案例(case）：工作流系统的基本目的就是处理案例，保险索赔、绩效考核、抵押申请等等都是案例。每一个案例都有一个唯一的标识，案例在出现和消失之间总是处于某个特定状态，这个状态有三个元素组成：
（1）案例相关的属性，指出特定条件下案例是否被执行或者忽略
（2）已经满足的条件，说明案例的进展。
（3）案例的内容，可能是文档、文件、档案或者数据库
2.任务（task），泛指一般的工作单元，而非具体案例活动的一次具体执行（这一般称为活动），为了区分这一点，引入了工作项(work item）和活动的概念(activity）。工作项是指将要被执行的实际工作块，而活动就是指工作项的执行。

3.过程(process）：过程指出了哪些任务需要被执行，以什么顺序执行。可以将过程理解为具体案例的蓝图。过程定义了案例的生命周期，每个生命周期都有start和end。

4.路由(route）：决定了那些任务被执行和以何种方式执行，包括顺序、并行、选择和循环四种形式的路由

5.启动（start）：触发，工作项是有一个resource来启动的，触发的形式包括：
（1）资源驱动，比如某个员工
（2）外部事件，一个JMS消息
（3）时间信号，比如凌晨2点触发某任务等等。
显然，触发是由环境而非工作流系统负责的。
二。Petri网

    Petri网是一种过程建模和分析工具，是1962年由Carl Adam Petri提出的，它有着坚实的数学基础，完全形式化的，可以将Petri网应用于工作流的建模和分析过程。

1.传统的Petri网：
 Petri网有place（库所）和transition（变迁）组成
place用于容纳token，token用以表示具体的案例，通过transition的firing（实施）来表现过程的状态转变。理解几个概念：
（1）transition enabled（变迁的就绪）：当且进当transition的每一个输入place都至少有一个token的时候，变迁就绪，可以实施。
（2）transition firing（变迁的实施）：变迁的从每个输入place取走一个token，并往它的每个输出place增加一个token。
看一个Petri网进行过程建模的例子：


圆圈表示place；矩形表示transition；用黑点表示token，存在于place中，这里没有表示出来，我在网上随便找的一张图，不过这里也展示了And-split、And-join、Or-split和Or-join的四种任务以及四种形式路由（从上到下依次是：顺序、并行、选择和循环）的Petri网建模。

2.高级Petri网
    传统Petri网有一些缺点，比如无法对某些活动进行有效的建模，容易变的庞大而难以理解，因此通过扩展，就可以对复杂情况用结构化、容易理解的方式建模。关注三种扩展：颜色扩展、时间扩展和层次扩展。
1.颜色扩展，为token引入颜色，用以区分同一place中的不同token，颜色其实代表了token（具体到某个案例）的属性，通过颜色扩展，我们可以为将要被消耗的token值设置了前置条件，那么变迁就绪的前提变化为：每个输入place都至少有一个token，并且满足前置条件。颜色扩展，也将产生的token与消耗的token进行了关联，产生token的值和数目将依赖于被消耗的token的值。

2.时间扩展，当需要对一个过程的预期性能进行判断时，引入了时间扩展，为token加入时间戳，只有当被消耗的token的时间戳早于当前时间，就绪的transition才可以firing，而产生的token的时间戳就等于firing的时间加上延时。通过引入时间扩展，我们将可以对类似十字路口红绿灯时间敏感的复杂过程进行建模。

3.层次扩展，过程是由一系列的place、transition、弧线和子过程组成的，为了反映这样的层次结构，适应复杂过程的建模，引入了层次扩展。

三、工作流概念到Petri网的映射

1.过程：过程是由条件和任务组成，映射到Petri网，place就是条件，而transition就是任务。条件和place都是被动元素，而任务和变迁都是主动元素。案例就是token，案例的属性通过颜色扩展来映射，token的值包含了案例的属性值。比如保险索赔案例的属性：赔额、索赔人、时间等等。

2.路由：四种路由的Petri网建模，上面的图片已经给出。简单分析下：
（1）顺序路由，对应图1，任务A和B是顺序执行的，任务B的输入是任务A的结果。通过在两个任务之间引入一个place来解决，中间的圆圈对应的place是任务B执行前的必须满足的条件，同时是任务A执行的结果。

（2）并行路由：对应图2，为了并行地执行任务B和C，引入了任务A，称为And-split，在A和B、C之间引入两个place，当A任务实施后，为两个输出place产生token，任务B和C就处于就绪状态可以实施。当B和C都实施之后，类似的实行And-join任务（任务D）合并两个任务。

（3）选择路由：图3对选择路由的建模并不正确，选择执行B或者C，那么在B和C之前引入两个新任务t11、t12和两个place(合并称为Or-split），在前一个place的token，要么实施t11，要么实施t12,假设实施t11,那么任务B将就绪，反之则任务C就绪。同样的可以建模Or-join。选择路由还根据选择的时刻划分为两类，具体不再展开。

（4）循环路由，图四的建模也不是很精确，循环也跟编程语言中的循环分为：repeate ...until...和while ...do...两种，前者至少执行一次，而后者可能不执行，

3.启动的映射：我们知道工作项是案例和准备执行的任务的组合，而活动是指一个工作项的实际执行，一旦工作项被实际执行，它就转换成活动。映射到Petri网，工作项就是就绪的变迁（enabled transition），而活动对应一个transition的firing。Petri网中的transition是“饥饿”的，一旦它们就绪，就会立刻执行，这样的变迁成为自动的。而工作流中的触发并非是自动的，它可能是资源驱动、外部信号驱动以及时间驱动的。为了建模触发，我们在变迁的上面添加符号来区分：向下的箭头表示资源驱动，信封表示外部信号驱动，而时钟表示时间驱动。

    初步了解了Petri网，确实是对工作流甚至业务过程建模的良好工具，对于利用Petri网进行过程分析，还待进一步学习。
